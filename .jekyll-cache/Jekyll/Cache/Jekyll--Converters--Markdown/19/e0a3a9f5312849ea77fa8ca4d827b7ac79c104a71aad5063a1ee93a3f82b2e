I"Ó(<h3 id="foundry">Foundry</h3>
<p>ê¸°ì¡´ì˜ ìŠ¤ë§ˆíŠ¸ì»¨íŠ¸ë ‰íŠ¸ ê°œë°œì€ <a href="https://trufflesuite.com/">Truffle</a>, <a href="https://hardhat.org/">hardhat</a> ë“±ì˜ íˆ´ì„ ì‚¬ìš©í•˜ì—¬ ê°œë°œì„ í•˜ì˜€ìŠµë‹ˆë‹¤. íŠ¹íˆ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ì„  Hardhatì„ í†µí•˜ì—¬ ë§ì´ ì§„í–‰í–ˆëŠ”ë°, Paradimì—ì„œ ê°œë°œí•œ <a href="https://github.com/foundry-rs/foundry">Foundry</a>ê°€ ì´ëŸ¬í•œ í…ŒìŠ¤íŠ¸ì— ìƒˆë¡œìš´ ëŒ€ì•ˆìœ¼ë¡œ ë“±ì¥í•˜ì˜€ìŠµë‹ˆë‹¤.</p>

<p>FoundryëŠ” ì‰½ê²Œ ì„¤ëª…í•˜ìë©´ Solidity ì–¸ì–´ë¥¼ Solidityë¡œ í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥í•˜ê²Œ ë„ì™€ì£¼ëŠ” íˆ´ì…ë‹ˆë‹¤. ê¸°ì¡´ì˜ íˆ´ë“¤ì„ í†µí•´ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê¸° ìœ„í•´ì„œëŠ”í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼  Javascript í˜¹ì€ Typescriptë¡œ ì‘ì„±í•´ì•¼í–ˆê¸° ë•Œë¬¸ì— ë§ì€ ì˜ì¡´ì„±ê³¼ configë“¤ì´ í•„ìš”í•˜ì˜€ìŠµë‹ˆë‹¤. ì˜ˆì‹œë¡œ, ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ í…ŒìŠ¤íŠ¸í•  ê²½ìš°ì—” BigNumber ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¨ê°€ë©° ìˆ«ìë¥¼ ë‹¤ë£¨ëŠ” ë¶ˆí¸í•¨ì´ ìˆëŠ”ë° Foundryë¥¼ ì“¸ ê²½ìš° ì´ëŸ° ë¶ˆí¸í•¨ì´ ì‚¬ë¼ì§‘ë‹ˆë‹¤.</p>

<p>Foundryì˜ Forgeë¥¼ í†µí•œ ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì˜ˆì‹œëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">contract</span> <span class="n">Foo</span> <span class="p">{</span>
  <span class="kt">uint256</span> <span class="k">public</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">function</span> <span class="n">set</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">_x</span><span class="p">)</span> <span class="k">external</span> <span class="p">{</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">_x</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">function</span> <span class="n">double</span><span class="p">()</span> <span class="k">external</span> <span class="p">{</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">x</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">contract</span> <span class="n">FooTest</span> <span class="p">{</span>
  <span class="n">Foo</span> <span class="n">foo</span><span class="p">;</span>

  <span class="c1">// The state of the contract gets reset before each
</span>  <span class="c1">// test is run, with the setUp() function being called
</span>  <span class="c1">// each time after deployment. Think of this like a JavaScript
</span>  <span class="c1">// beforeEach block
</span>  <span class="k">function</span> <span class="n">setUp</span><span class="p">()</span> <span class="k">public</span> <span class="p">{</span>
    <span class="n">foo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Foo</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="c1">// A simple unit test
</span>  <span class="k">function</span> <span class="n">testDouble</span><span class="p">()</span> <span class="k">public</span> <span class="p">{</span>
    <span class="nb">require</span><span class="p">(</span><span class="n">foo</span><span class="p">.</span><span class="n">x</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">foo</span><span class="p">.</span><span class="n">double</span><span class="p">();</span>
    <span class="nb">require</span><span class="p">(</span><span class="n">foo</span><span class="p">.</span><span class="n">x</span><span class="p">()</span> <span class="o">==</span> <span class="mi">2</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// A failing unit test (function name starts with testFail)
</span>  <span class="k">function</span> <span class="n">testFailDouble</span><span class="p">()</span> <span class="k">public</span> <span class="p">{</span>
    <span class="nb">require</span><span class="p">(</span><span class="n">foo</span><span class="p">.</span><span class="n">x</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">foo</span><span class="p">.</span><span class="n">double</span><span class="p">();</span>
    <span class="nb">require</span><span class="p">(</span><span class="n">foo</span><span class="p">.</span><span class="n">x</span><span class="p">()</span> <span class="o">==</span> <span class="mi">4</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="í¼ì§•-í…ŒìŠ¤íŠ¸-ì§€ì›-ë¬´ì‘ìœ„-ë°ì´í„°-ì…ë ¥">í¼ì§• í…ŒìŠ¤íŠ¸ ì§€ì› (ë¬´ì‘ìœ„ ë°ì´í„° ì…ë ¥)</h3>
<p>í…ŒìŠ¤íŠ¸ë¥¼ í•˜ë‹¤ë³´ë©´ ìƒê°í•˜ì§€ë„ ëª»í•œ ì—ëŸ¬ì‚¬í•­ì´ ë°œìƒí•˜ê²Œë©ë‹ˆë‹¤. ì‚¬ëŒì´ ëª¨ë“  í…ŒìŠ¤íŠ¸ ì˜ì—­ì„ ì»¤ë²„í•˜ê¸°ëŠ” ì‰½ì§€ ì•Šìœ¼ë¯€ë¡œ ë¬´ì‘ìœ„ì˜ inputì„ í†µí•´ ìë™í™”ëœ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ëŠ” í¼ì§• ê¸°ëŠ¥ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ëŠ” Foundryì—ì„œ ì§€ì›í•˜ëŠ” í¼ì§• ê¸°ëŠ¥ì˜ í•œ ì˜ˆì‹œì…ë‹ˆë‹¤.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">testDoubleWithFuzzing</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">x</span><span class="p">)</span> <span class="k">public</span> <span class="p">{</span>
  <span class="n">foo</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
  <span class="nb">require</span><span class="p">(</span><span class="n">foo</span><span class="p">.</span><span class="n">x</span><span class="p">()</span> <span class="o">==</span> <span class="n">x</span><span class="p">);</span>
  <span class="n">foo</span><span class="p">.</span><span class="n">double</span><span class="p">();</span>
  <span class="nb">require</span><span class="p">(</span><span class="n">foo</span><span class="p">.</span><span class="n">x</span><span class="p">()</span> <span class="o">==</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">x</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ìœ„ì—ì„œ xì— ìë™ìœ¼ë¡œ ì—¬ëŸ¬ ê°’ì„ ëŒ€ì…í•´ í…ŒìŠ¤íŠ¸í•˜ê³  ì—ëŸ¬ê°€ ë°œìƒí•  ì‹œ ì¹´ìš´í„° ì˜ˆì œ ê°’ì¸ xë¥¼ ì•„ë˜ì™€ê°™ì´ ë³´ì—¬ì¤ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[FAIL. Counterexample: calldata=0x44735ef10000000000000000000000000000000000000000000000000000000000000001, args=[Uint(1)]] testDoubleWithFuzzingCounterExample (gas: [fuzztest])
</code></pre></div></div>

<p>ì´ ì™¸ì—ë„, VM ìƒíƒœ ê°’ì„ ë³€ê²½í•˜ëŠ” ê¸°ëŠ¥ê³¼ ë¼ì´ë¸Œ ë„¤íŠ¸ì›Œí¬ì˜ ìƒíƒœë¥¼ ë°˜ì˜í•œ í…ŒìŠ¤íŠ¸ ê¸°ëŠ¥ë“¤ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ ì˜ˆì œëŠ” block timestamp ê°’ì„ 100ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ í…ŒìŠ¤íŠ¸í•˜ëŠ” ì˜ˆì œì…ë‹ˆë‹¤.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">address</span> <span class="k">constant</span> <span class="n">CHEATCODE_ADDRESS</span> <span class="o">=</span> <span class="mh">0x7cFA93148B0B13d88c1DcE8880bd4e175fb0DeDF</span><span class="p">;</span>

<span class="n">interace</span> <span class="n">Vm</span> <span class="p">{</span>
  <span class="c1">// Sets the block.timestamp to `x`.
</span>  <span class="k">function</span> <span class="n">warp</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">x</span><span class="p">)</span> <span class="k">external</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">contract</span> <span class="n">MyTest</span> <span class="p">{</span>
  <span class="n">Vm</span> <span class="n">vm</span> <span class="o">=</span> <span class="n">Vm</span><span class="p">(</span><span class="n">CHEATCODE_ADDRESS</span><span class="p">);</span>

  <span class="k">function</span> <span class="n">testWarp</span><span class="p">()</span> <span class="k">public</span> <span class="p">{</span>
    <span class="n">vm</span><span class="p">.</span><span class="n">warp</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
    <span class="nb">require</span><span class="p">(</span><span class="n">block</span><span class="p">.</span><span class="n">timestamp</span> <span class="o">==</span> <span class="mi">100</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>ìœ„ì— ì½”ë“œì—ì„œ ë³´ë“¯ì´, wrap() í•¨ìˆ˜ë¥¼ í†µí•´ block timestamp ê°’ì„ ë³€ê²½í•˜ì—¬ í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì´ ì™¸ì—ë„ block diffculty, block number, slot ê°’ ë³€ê²½ ë° ì½ê¸° ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ë“¤ì„ ì œê³µí•˜ë©° ë” ìì„¸í•œ ì‚¬í•­ì€ <a href="https://github.com/foundry-rs/foundry/tree/master/forge#cheat-codes">Readme</a>ë¥¼ ì°¸ê³ í•˜ì‹œë©´ ë©ë‹ˆë‹¤. ì‹¤ì‹œê°„ ë„¤íŠ¸ì›Œí¬ì™€ì˜ ì—°ë™ì€ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ ì‰½ê²Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>forge test --fork-url &lt;your node url&gt; [--fork-block-number &lt;the block number you want&gt;].
</code></pre></div></div>

<h3 id="foundry-ì„¤ì¹˜">Foundry ì„¤ì¹˜</h3>
<p><a href="https://github.com/foundry-rs/foundry">Foundry</a>ì˜ Githubì—ì„œ ì„¤ì¹˜ ê´€ë ¨ ë‚´ìš©ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì €ëŠ” Windowì˜ WSL2ì˜ ìš°ë¶„íˆ¬í™˜ê²½ì— Dockerë¥¼ í†µí•´ ì„¤ì¹˜í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. dockerë¥¼ í†µí•´ ì„¤ì¹˜í•  ê²½ìš°ì—” ì•„ë˜ì™€ ê°™ì€ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì£¼ë©´ ë©ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull ghcr.io/foundry-rs/foundry:latest
</code></pre></div></div>
<p>ìœ„ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´ ì•„ë˜ì‚¬ì§„ê³¼ ê°™ì´ ì •ìƒì ìœ¼ë¡œ ì„¤ì¹˜ê°€ ë©ë‹ˆë‹¤. foundryì˜ ìì„¸í•œ ë„ì»¤ ì‚¬ìš©ë²•ì€ <a href="https://book.getfoundry.sh/tutorials/foundry-docker">docker ì„¹ì…˜</a>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p style="text-align: center;">
	<img src="http://localhost:4000/assets/images/foundry/docker_foundry_install.png" alt="Drawing" style="max-width: 80%; height: auto;" />
</p>

<h3 id="reference">Reference</h3>
<ol>
  <li><a href="https://www.paradigm.xyz/2021/12/introducing-the-foundry-ethereum-development-toolbox">Paradimâ€™s Blog Post for Foundry</a></li>
</ol>

:ET