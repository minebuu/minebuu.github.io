I"f<h3 id="introduction">Introduction</h3>
<p>ë©”íƒ€ë§ˆìŠ¤í¬ë¥¼ ì‚¬ìš©í•˜ë‹¤ë³´ë©´ Web3 í™ˆí˜ì´ì§€ì—ì„œ ë©”íƒ€ë§ˆìŠ¤í¬ë¥¼ í†µí•´ ë¡œê·¸ì¸ì„ ìˆ˜í–‰í•˜ê±°ë‚˜, ì˜¤í”ˆì”¨ì™€ ê°™ì€ NFT ê±°ë˜ì†Œì—ì„œ NFTë¥¼ ì‚¬ê³  íŒ” ë•Œ ì•„ë˜ ì‚¬ì§„ê³¼ ê°™ì€ ì„œëª… ìš”ì²­ì„ ë°›ì€ ê²½í—˜ì´ ë§ì„ ê²ƒì´ë‹¤. ì—¬ëŸ¬ ì‚¬ì´íŠ¸ì—ì„œ ì„œëª…ì„ í•˜ë‹¤ ë³´ë©´ ê´œìŠ¤ë˜ ì–´ë–¤ ë³´ì•ˆ ìœ„í˜‘ì´ ìƒê¸°ì§€ëŠ” ì•Šì„ê¹Œí•˜ëŠ” ë§‰ì—°í•œ ë‘ë ¤ì›€ì´ ëª°ë ¤ì˜¤ê²Œ ëœë‹¤. ë˜í•œ, ì–´ë–¤ ê³³ì€ ì„œëª… ìš”ì²­ ì‹œ ì•„ë˜ ë‘ë²ˆì§¸ ì‚¬ì§„ì²˜ëŸ¼ ë©”ì‹œì§€ ë‚´ìš© ì•ˆì— íŠ¹ì • í•´ì‹œ ê°’ë§Œ ë³´ì—¬ì£¼ëŠ” ë°˜ë©´, ì˜¤í”ˆì”¨ì™€ ê°™ì´ Offerer, Token ê°’ ë“± ë‹¤ì–‘í•œ ë°ì´í„°ë¥¼ ì„¸ë¶€ì ìœ¼ë¡œ ë³´ì—¬ì£¼ëŠ” ê³³ì´ ìˆë‹¤. ì˜¤ëŠ˜ì€ ì´ëŸ¬í•œ ì„œëª… ë°©ì‹ì˜ ì°¨ì´ë“¤ì„ ì•Œì•„ë³´ê³  ì˜¤í”ˆì”¨ì—ì„œ ì‚¬ìš© ì¤‘ì¸ ì„œëª… ë°©ì‹ (EIP721)ì— ëŒ€í•´ ì¢€ ë” ìì„¸íˆ ì•Œì•„ë³´ê² ë‹¤. ì´ ê¸€ì„ í†µí•´ ê·¸ ë™ì•ˆ ë§‰ì—°íˆ ê°€ì¡Œë˜ ì„œëª…ì— ëŒ€í•œ ë¶ˆì•ˆí•¨ì„ í•´ì†Œí•˜ê³ , ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ì„œëª… ë°©ì‹ì´ ì¢€ ë” ì•ˆì „í•˜ë„ë¡ ë°œì „ë˜ì–´ ì™”ëŠ”ì§€ë¥¼ í™•ì¸í–ˆìœ¼ë©´ í•œë‹¤.</p>

<p style="text-align: center;">
	<img src="http://localhost:4000/assets/images/Signature/opensea_listing.png" alt="Drawing" style="max-width: 80%; height: auto;" />
</p>

<p style="text-align: center;">
	<img src="http://localhost:4000/assets/images/Signature/authenticating.png" alt="Drawing" style="max-width: 80%; height: auto;" />
</p>

<h3 id="metamaskì—ì„œì˜-ì„œëª…">MetaMaskì—ì„œì˜ ì„œëª…</h3>
<p>ë©”íƒ€ë§ˆìŠ¤í¬ì™€ ê°™ì€ ì§€ê°‘ì€ ì‚¬ìš©ìì˜ Keyë¥¼ ê°€ì§€ê³  ìˆê³ , ì´ë¥¼ í†µí•œ ë‹¤ì–‘í•œ ì„œëª… ë°©ì‹ì„ ì§€ì›í•œë‹¤. ë©”íƒ€ë§ˆìŠ¤í¬ ë¡œê·¸ì¸ì„ ì§€ì›í•˜ëŠ” ì›¹ì‚¬ì´íŠ¸ì—ì„œëŠ” ì„œëª…ì„ í†µí•´ ì£¼ì†Œì— ëŒ€í•œ ì†Œìœ ê¶Œ <a href="https://medium.com/hackernoon/writing-for-blockchain-wallet-signature-request-messages-6ede721160d5">ì¸ì¦(Authentication)</a>ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆê³ , ì˜¤í”ˆì”¨ì²˜ëŸ¼ on-chain í”„ë¡œí† ì½œì„ ìœ„í•´ off-chain ë©”ì‹œì§€ ì„œëª…ì— í™œìš©í•  ìˆ˜ ìˆë‹¤. ì•„ë˜ëŠ” ë©”íƒ€ë§ˆìŠ¤í¬ì˜ ì§€ì› ì„œëª… í•¨ìˆ˜ë“¤ ëª©ë¡ì…ë‹ˆë‹¤.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">eth_sign</code></li>
  <li><code class="language-plaintext highlighter-rouge">personal_sign</code></li>
  <li><code class="language-plaintext highlighter-rouge">signTypedData</code> (currently identical to <code class="language-plaintext highlighter-rouge">signTypedData_v1</code>)</li>
  <li><code class="language-plaintext highlighter-rouge">signTypedData_v1</code></li>
  <li><code class="language-plaintext highlighter-rouge">signTypedData_v3</code></li>
  <li><code class="language-plaintext highlighter-rouge">signTypedData_v4</code></li>
</ul>

<p>ìœ„ì—ì„œ <code class="language-plaintext highlighter-rouge">eth_sign</code>ì€ MetaMaskê°€ ê°€ì¥ ì²˜ìŒìœ¼ë¡œ ì œê³µí•œ ì„œëª… í•¨ìˆ˜ë¡œì„œ, ì„ì˜ì˜ í•´ì‹œ ê°’ì— ë‹¨ìˆœíˆ ì„œëª…í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì„ì˜ì˜ í•´ì‹œ ê°’ì€ íŠ¹ì • íŠ¸ëœì­ì…˜ì´ë‚˜ ë‹¤ë¥¸ ë°ì´í„°ê°€ ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, í”¼ì‹± ê³µê²©ì— ì‚¬ìš©ë  ìˆ˜ ìˆì–´ ë§¤ìš° ìœ„í—˜í•œ ì„œëª… í•¨ìˆ˜ë‹¤. ìš°ë¦¬ëŠ” ë¹„ë¡ ê°€ìŠ¤ë¥¼ ì†Œëª¨í•˜ì§€ ì•Šë”ë¼ë„, ë©”íƒ€ë§ˆìŠ¤í¬ì—ì„œ eth_signë¥¼ í†µí•´ ì„œëª…í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œ ëª¨ë“  ìì‚°ì´ íƒˆì·¨ë  ìœ„í—˜ì´ ìˆë‹¤. ì´ì™€ ê´€ë ¨ëœ ì˜ˆì‹œëŠ” ë‹¤ìŒ <a href="https://twitter.com/CT_IOE/status/1534658825843683328?s=20&amp;t=oTD2R7LJ3w5jZAUeLt2xog">íŠ¸ìœ„í„° ì“°ë ˆë“œ</a>ì— ë‚˜ì™€ìˆë‹¤.</p>

<p>ì´ëŸ¬í•œ ìœ„í—˜ ë•Œë¬¸ì— <code class="language-plaintext highlighter-rouge">eth_sign</code>ì„ í†µí•´ ì‚¬ìš©ìì—ê²Œ ì„œëª… ìš”ì²­ì´ ë°œìƒí•  ì‹œ ë©”íƒ€ë§ˆìŠ¤í¬ëŠ” ì•„ë˜ì™€ ê°™ì€ ë¹¨ê°„ìƒ‰ ê²½ê³  êµ¬ë¬¸ì„ ë³´ì—¬ì¤€ë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">personal_sign</code>ì€ <code class="language-plaintext highlighter-rouge">eth_sign</code>ì´ í•´ì‹œ ê°’ë§Œ ë³´ì—¬ì£¼ëŠ” ê²ƒê³¼ëŠ” ë‹¤ë¥´ê²Œ ì‚¬ëŒì´ ì½ì„ ìˆ˜ ìˆëŠ” í˜•íƒœ(UTF-8)ë¡œ ì›í•˜ëŠ” ë©”ì‹œì§€ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. <code class="language-plaintext highlighter-rouge">personal_sign</code>ì˜ ì˜ˆì‹œëŠ” ì•„ë˜ì™€ ê°™ë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>handleSignMessage = ({ publicAddress, nonce }) =&gt; {
    return new Promise((resolve, reject) =&gt;
      web3.personal.sign(
        web3.fromUtf8(`I am signing my one-time nonce: ${nonce}`),
        publicAddress,
        (err, signature) =&gt; {
          if (err) return reject(err);
          return resolve({ publicAddress, signature });
        }
      )
    );
  };
</code></pre></div></div>

<h3 id="ë¡œê·¸ì¸-ê¸°ëŠ¥ìœ¼ë¡œì„œì˜-ì„œëª…-ìš”ì²­">ë¡œê·¸ì¸ ê¸°ëŠ¥ìœ¼ë¡œì„œì˜ ì„œëª… ìš”ì²­</h3>

<h3 id="eip712">EIP712</h3>

<h3 id="ì„œëª…ì„-ì´ìš©í•œ-ê³µê²©-ì‚¬ë¡€">ì„œëª…ì„ ì´ìš©í•œ ê³µê²© ì‚¬ë¡€</h3>

<h3 id="ê²°ë¡ ">ê²°ë¡ </h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>offerer:
0x4fbEde53b59D1a2Ab85F785ad76E1dcD66A1546A
offer:
0:
itemType:
2
token:
0x942BC2d3e7a589FE5bd4A5C6eF9727DFd82F5C8a
identifierOrCriteria:
906
startAmount:
1
endAmount:
1
consideration:
0:
itemType:
0
token:
0x0000000000000000000000000000000000000000
identifierOrCriteria:
0
startAmount:
108000000000000000
endAmount:
108000000000000000
recipient:
0x4fbEde53b59D1a2Ab85F785ad76E1dcD66A1546A
1:
itemType:
0
token:
0x0000000000000000000000000000000000000000
identifierOrCriteria:
0
startAmount:
3000000000000000
endAmount:
3000000000000000
recipient:
0x0000a26b00c1F0DF003000390027140000fAa719
2:
itemType:
0
token:
0x0000000000000000000000000000000000000000
identifierOrCriteria:
0
startAmount:
9000000000000000
endAmount:
9000000000000000
recipient:
0x6C093Fe8bc59e1e0cAe2Ec10F0B717D3D182056B
startTime:
1668422891
endTime:
1671014891
orderType:
2
zone:
0x004C00500000aD104D7DBd00e3ae0A5C00560C00
zoneHash:
0x0000000000000000000000000000000000000000000000000000000000000000
salt:
24446860302761739304752683030156737591518664810215442929811789059466231445624
conduitKey:
0x0000007b02230091a7ed01230072f7006a004d60a8d4e71d599b8104250f0000
counter:
0
</code></pre></div></div>
<!--
### Gas Optimization (Assembly)
//ìœ„ì˜ OpenZeppelinì´ ì‘ì„±í•œ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë ‰íŠ¸ ì½”ë“œëŠ” ì–´ì…ˆë¸”ë¦¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë™ì‘í•œë‹¤. ëŒ€ë¶€ë¶„ì˜ í”„ë¡œì íŠ¸ë“¤ì€ í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤. ë‹¤ë§Œ Gas ë¹„ìš©ì„ ì¤„ì´ê¸° ìœ„í•´ì„œ ì–´ì…ˆë¸”ë¦¬(Assembly)ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°™ì€ ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. Paradigmì˜ [Art Gobblers]ë¼ëŠ” NFT í”„ë¡œì íŠ¸ì˜ ì»¨íŠ¸ë ‰íŠ¸ë¥¼ ì˜ˆì‹œë¡œ ì‚´í´ë³´ì.  
-->

<h3 id="reference">Reference</h3>
<ol>
  <li><a href="https://docs.metamask.io/guide/signing-data.html#a-brief-history">MetaMaskâ€™s Guide for signing the data</a></li>
  <li><a href="https://it-timehacker.tistory.com/316">ì²´ì¸ì˜ ì •ì„: EIP712</a></li>
</ol>

<p>[]:https://medium.com/hackernoon/writing-for-blockchain-wallet-signature-request-messages-6ede721160d5
[Koh Wei Jieâ€™s Blog post for EIP712]:https://medium.com/metamask/eip712-is-coming-what-to-expect-and-how-to-use-it-bb92fd1a7a26</p>
:ET